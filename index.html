<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Open Graph -->
<meta property="og:title" content="üéâ T√πng Ph·∫°m ƒë√£ g·ª≠i l·ªùi ch√∫c nƒÉm m·ªõi t·ªõi b·∫°n üéâ">
<meta property="og:description" content="Nh·∫•n ƒë·ªÉ xem l·ªùi ch√∫c nƒÉm m·ªõi">
<meta property="og:image" content="https://i.imgur.com/4M7IWwP.png">
<meta property="og:url" content="https://tungpham99.github.io/chuc-tet/">

<title>Ch√∫c M·ª´ng NƒÉm M·ªõi</title>

<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  font-family:system-ui;
  background:linear-gradient(135deg,#b30000,#ffcc33);
}

/* Fireworks */
#fireworks{
  position:fixed;
  inset:0;
  z-index:1;
}

/* Horse 3D */
#horse3d{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:40vh;
  z-index:2;
  pointer-events:none;
}

/* Hoa mai */
.mai{
  position:fixed;
  top:-50px;
  font-size:24px;
  animation:fall linear infinite;
  z-index:2;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}

/* Card */
.card{
  position:relative;
  z-index:3;
  background:rgba(0,0,0,.35);
  padding:26px 22px;
  border-radius:18px;
  max-width:420px;
  width:90%;
  margin:auto;
  top:50%;
  transform:translateY(-50%);
  text-align:center;
  color:#fff;
}

#wish{
  font-size:18px;
  line-height:1.6;
  margin:18px 0 22px;
}

button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:999px;
  font-size:16px;
  font-weight:bold;
  margin-bottom:10px;
}

.reply{background:#00c853;color:#fff;}
.share{background:#ffd600;color:#8d2b00;}

.counter{
  font-size:13px;
  opacity:.85;
  margin-top:6px;
}

/* Toast Facebook */
.toast{
  position:fixed;
  top:15px;
  left:50%;
  transform:translateX(-50%);
  background:#1877f2;
  color:#fff;
  padding:12px 18px;
  border-radius:999px;
  font-size:14px;
  z-index:4;
  animation:pop 3s ease forwards;
}
@keyframes pop{
  0%{opacity:0;transform:translate(-50%,-10px);}
  10%,90%{opacity:1;}
  100%{opacity:0;}
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>
<canvas id="horse3d"></canvas>

<div class="card">
  <h2>üßß Ch√∫c M·ª´ng NƒÉm M·ªõi üßß</h2>
  <div id="wish"></div>

  <button class="reply" onclick="reply()">üí¨ Ph·∫£n h·ªìi</button>
  <button class="share" onclick="share()">üì§ Chia s·∫ª</button>

  <div class="counter">
    üëÄ L∆∞·ª£t m·ªü: <span id="count">0</span>
  </div>
</div>

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>

<script>
/* ===== L·ªúI CH√öC ===== */
const wishes=[/* gi·ªØ nguy√™n 100 c√¢u c·ªßa b·∫°n */];
const p=new URLSearchParams(location.search);
const from=p.get("from")||"m·ªôt ng∆∞·ªùi b·∫°n";
const wish=wishes[Math.floor(Math.random()*wishes.length)];
document.getElementById("wish").innerHTML=
`üéÅ <b>${from}</b> g·ª≠i b·∫°n l·ªùi ch√∫c:<br><br>${wish}`;

/* ===== ƒê·∫æM L∆Ø·ª¢T M·ªû ===== */
let k="tet_click";
let c=+localStorage.getItem(k)||0;
localStorage.setItem(k,++c);
document.getElementById("count").innerText=c;

/* ===== TOAST ===== */
const t=document.createElement("div");
t.className="toast";
t.innerText="üîî T√πng Ph·∫°m c√≥ l·ªùi ch√∫c nƒÉm m·ªõi, nh·∫•n v√†o ngay";
document.body.appendChild(t);
navigator.vibrate?.(80);

/* ===== HOA MAI ===== */
for(let i=0;i<12;i++){
  let m=document.createElement("div");
  m.className="mai";
  m.innerText="üåº";
  m.style.left=Math.random()*100+"vw";
  m.style.fontSize=20+Math.random()*20+"px";
  m.style.animationDuration=5+Math.random()*6+"s";
  document.body.appendChild(m);
}

/* ===== PH√ÅO HOA ===== */
const fw=document.getElementById("fireworks");
const fctx=fw.getContext("2d");
function rs(){fw.width=innerWidth;fw.height=innerHeight;}
rs();addEventListener("resize",rs);
let sparks=[];
setInterval(()=>{
  let x=Math.random()*fw.width;
  let y=Math.random()*fw.height/2;
  for(let i=0;i<40;i++)
    sparks.push({x,y,dx:(Math.random()-.5)*4,dy:(Math.random()-.5)*4,l:60});
},1200);
(function draw(){
  fctx.clearRect(0,0,fw.width,fw.height);
  sparks.forEach((s,i)=>{
    s.x+=s.dx;s.y+=s.dy;s.l--;
    fctx.fillStyle="rgba(255,215,0,.8)";
    fctx.fillRect(s.x,s.y,3,3);
    if(s.l<=0) sparks.splice(i,1);
  });
  requestAnimationFrame(draw);
})();

/* ===== NG·ª∞A 3D ===== */
const hc=document.getElementById("horse3d");
const scene=new THREE.Scene();
const cam=new THREE.PerspectiveCamera(45,innerWidth/(innerHeight*.4),0.1,100);
const ren=new THREE.WebGLRenderer({canvas:hc,alpha:true,antialias:true});
ren.setSize(innerWidth,innerHeight*.4);
ren.setPixelRatio(devicePixelRatio);
cam.position.set(0,1.2,4);

scene.add(new THREE.DirectionalLight(0xffffff,1.2));
scene.add(new THREE.AmbientLight(0xffffff,.6));

let horse,mixer;
new THREE.GLTFLoader().load(
"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Horse/glTF/Horse.gltf",
g=>{
  horse=g.scene;
  horse.scale.set(1.2,1.2,1.2);
  horse.position.set(-4,-.8,0);
  horse.rotation.y=Math.PI/2;
  scene.add(horse);
  mixer=new THREE.AnimationMixer(horse);
  g.animations.forEach(a=>mixer.clipAction(a).play());
});
const clk=new THREE.Clock();
(function anim(){
  requestAnimationFrame(anim);
  let d=clk.getDelta();
  mixer&&mixer.update(d);
  if(horse){
    horse.position.x+=0.02;
    if(horse.position.x>4) horse.position.x=-4;
  }
  ren.render(scene,cam);
})();

/* ===== ACTION ===== */
function reply(){location.href="https://m.me/";}
function share(){
  location.href="https://www.facebook.com/sharer/sharer.php?u="+
  encodeURIComponent(location.href);
}
</script>

</body>
</html>
